import numpy as np
import scipy
from scipy import interpolate
from scipy.interpolate import splprep, splev
from matplotlib import pyplot as plt


pts = np.array([
[1.3	,-0.2117026597],
[1.9	,-0.2117026597],
[2.5	,-0.2117026597],
[3.1	,-0.2117026597],
[3.7	,-0.2117026597],
[4.3	,-0.2117026597],
[4.9	,-0.2117026597],
[5.5	,-0.2117026597],
[5.966	,0.03089],
[6.37	,0.374],
[6.82772,1.082],
# [7.14002,1.9819],
[7.1144	,2.8924],
# [7.2144	,4.5],
[7.1144	,8.5],
[7.1144	,12.5],
[7.1144	,14.5],
[7.2144	,16.5],
[7.2144	,18.5],
[7.2144	,20.1],
[7.2144	,21.7144],
# [7.2144	,22.12],
# [7.2144	,22.623],
# [7.03	,23.11],
# [6.4256	,23.11],
[6.8,23.3],
[5.64275	,23.511],
[5.1	,23.511],
[4.5	,23.511],
[4	,23.511],
[3.5	,23.511],
[3	,23.511],
[2.5	,23.511],
[1	,23.511],
[0	,23.511],
#[-0.953,23.511],
[-1.0,23.511],
[-1.2993,23.511],
#[-1.62	,24.11],
# [-1.967	,23.929],
[-2.1	,19.2],
[-2.1	,16.2],
[-2.1	,14.2],
[-2.1	,12.2],
[-2.1	,10.1],
[-2.1	,8.1],
[-2.1	,6.1],
# [-2.245	,4],
# [-2.245	,2],
# [-2.245	,0.987313],
# [-1.9671,0.2238],
[-2.1,2.37],
[-1.4453,-0.0138],
[-0.659	,-0.17652],
[0.17854,-0.23048],
[1.3,-0.2117026597]
])

pts = pts.T
x,y = pts
tck, u = interpolate.splprep([x, y], s=0, per=True)

xi, yi = interpolate.splev(np.linspace(0, 1, 1000), tck)

xi = xi.reshape((-1,1))
yi = yi.reshape((-1,1))

new_pts = np.hstack((xi,yi)).T
np.save("waypoints2",new_pts)

# plot the result
fig, ax = plt.subplots(1, 1)
ax.plot(x, y, 'or')
ax.plot(xi, yi, '-b')
plt.show()
